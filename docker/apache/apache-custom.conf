ServerName raspapremio.biz


<Directory /var/www/html>
    # Define a ordem dos arquivos de índice a serem procurados.
    # Colocamos 'index.php' primeiro, que é o padrão para aplicações PHP.
    DirectoryIndex index.php index.html

    # Permite que arquivos .htaccess sobrescrevam configurações.
    # Essencial para frameworks (Laravel, Symfony, WordPress) usarem URLs amigáveis.
    # Se você não usa .htaccess, pode mudar para "AllowOverride None" para um
    # pequeno ganho de performance.
    AllowOverride All

    # Configurações de diretório:
    # -Indexes: Proíbe o Apache de gerar listagens de arquivos de um diretório
    #           caso um arquivo de índice não seja encontrado. (Importante para segurança!)
    # +FollowSymLinks: Permite que o Apache siga links simbólicos.
    Options -Indexes +FollowSymLinks

    # Permite que todas as requisições sejam tratadas pelo .htaccess e pela aplicação.
    Require all granted
</Directory>

# 3. Otimizações e Segurança
#    Reduz a quantidade de informações que o servidor expõe sobre si mesmo.
#    Em vez de mostrar "Apache/2.4.65 (Debian) ...", ele mostrará apenas "Apache".
ServerTokens Prod
ServerSignature Off

# 4. Melhora o logging para ambientes de container
#    Define um formato de log mais detalhado e compatível com JSON,
#    o que facilita a análise por ferramentas como Fluentd ou Logstash.
#    Este formato inclui o tempo de resposta da requisição.
LogFormat "{ \
    \"timestamp\": \"%{%Y-%m-%dT%H:%M:%S%z}t\", \
    \"remote_ip\": \"%a\", \
    \"request_host\": \"%v\", \
    \"request_method\": \"%m\", \
    \"request_uri\": \"%U%q\", \
    \"request_protocol\": \"%H\", \
    \"status_code\": %>s, \
    \"bytes_sent\": %B, \
    \"referer\": \"%{Referer}i\", \
    \"user_agent\": \"%{User-Agent}i\", \
    \"response_time_ms\": %D \
}" json_log

# Descomente a linha abaixo para usar o novo formato de log.
# Você pode precisar ajustar o arquivo de VirtualHost (000-default.conf)
# para apontar para este novo formato.
# CustomLog /proc/self/fd/1 json_log
